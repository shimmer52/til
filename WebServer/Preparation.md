# VPSレンタル〜公開前セキュリティ

### さくらVPSを使用
- [さくらのナレッジ](https://knowledge.sakura.ad.jp/8218/)を見ながら登録（デフォルトのOSはCentOS7 X64_84にかわってる）
- VPSへの接続(Mac)はターミナルで`ssh root@xxxx(IPアドレス)`
- `yum update`でアップデート

### CentOSで自宅サーバー構築
- [上記サイト](https://centossrv.com/)を参考にしながらセキュリティ設定
1. ファイル改竄検知システム導入(Tripwire)
  > ファイルやディレクトリをデータベースに保存し、現行システム上のファイルの状態をデータベースのそれと照らし合わせながら、変更されていないかを確認する。この比較作業を、tripwireでは整合性チェックと呼ぶ。
  - 躓いた所：（３）データベース作成をすると`No such file...`とのエラー（？）
  - 解決方法：twpol.txtファイルを復元し、該当ファイルを除外(#つける）
  - 参考：使用するコマンドに変わったものはないが[ここ](https://ohwhsmm7.blog.fc2.com/blog-entry-196.html)を参考にした

2. rootkit検知ツール導入(chkrootkit)
  > 万が一サーバがクラックされてクラッカーにコマンドなどを改竄された場合，それを発見するためのチェックを行うツール
  - 特に躓くことなく設定

3. アンチウイルスソフト導入(Clam AntiVirus)
  > 「ファイルスキャン」「電子メールスキャン」「Webスキャン」などエンドポイントセキュリティを含むさまざまな状況で使用されるアンチウイルスエンジンです。特に、UNIX/Linux環境では定番アンチウイルスツールとして利用されています。
　- 躓いた所：例として除外したディレクトリとは？→システムが管理しているディレクトリなどはスキャンする必要がないそう
 - 参考：[このサイト](https://www.infocircus.jp/2019/10/05/centos-7-virusscan-clamav/)
 
4. ファイアウォール構築(iptables)
  > iptablesとは一般的なLinuxに搭載されているパケットフィルタの事
）  - 各種サービスを公開する場合の設定(SSH,DNS,Webサーバー×２）
  - [ここ](https://www.bigbang.mydns.jp/iptables-x.htm)を参考に内容を整理した
